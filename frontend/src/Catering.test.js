import React from "react";
import Catering from "./Catering";
import { act } from "react-dom/test-utils";
import ReactDOM from "react-dom";

let container;

beforeEach(() => {
	container = document.createElement("div");
	document.body.appendChild(container);
});

afterEach(() => {
	document.body.removeChild(container);
	container = null;
});

const currentUser = { username: "testuser", isAdmin: false };

const testEvents = [
	{
		id: 1,
		title: "Anniversary",
		description: "Anniversary",
		eventDate: "2021-05-19",
		eventTime: "13:00",
		city: "Minsk",
		state: "CA",
		country: "Belarus",
		imgUrl:
			"https://images.unsplash.com/photo-1532117182044-031e7cd916ee?ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&ixlib=rb-1.2.1&auto=format&fit=crop&w=800&q=80",
		hostUsername: "testuser"
	},
	{
		id: 2,
		title: "Wedding",
		description: "Wedding",
		eventDate: "2021-05-19",
		eventTime: "13:00",
		city: "Minsk",
		state: "CA",
		country: "Belarus",
		imgUrl:
			"https://images.unsplash.com/photo-1532117182044-031e7cd916ee?ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&ixlib=rb-1.2.1&auto=format&fit=crop&w=800&q=80",
		hostUsername: "testuser"
	}
];

describe("component renders with elements on the page", () => {
	it("shows search button on the page and initial text", () => {
		act(() => {
			ReactDOM.render(<Catering events={testEvents} currentUser={currentUser} />, container);
		});
		let btn = container.querySelector("button");
		expect(btn).toBeInTheDocument();
		let lookup = container.querySelector(".Catering-bold");
		expect(lookup).toBeInTheDocument();
	});
});
